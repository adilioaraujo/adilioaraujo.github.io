<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snakes</title>
</head>
<body>
<script>
    function g(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function h(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:g(a)}}var k="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
    function m(a,b){if(b){var c=l;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&k(c,a,{configurable:!0,writable:!0,value:b})}}m("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});
    function n(){var a=this,b=new URL(location.href);this.H={ba:b.searchParams.has("geek")&&"1"===b.searchParams.get("geek"),mode:Math.round(1*b.searchParams.get("mode")||0),da:(b.searchParams.get("player1")||"Player 1").substring(0,16),ea:(b.searchParams.get("player2")||"Player 2").substring(0,16)};this.i={P:"#1565C0",R:"#EF6C00"};this.a=540;this.f=this.a/250;this.X={ca:0,t:0,r:960,aa:this.a};q(document.body,"\n            position: relative;\n            width: 100vw;\n            height: 100vh;\n            margin: 0;\n            padding: 0;\n            overflow: hidden;\n            text-align: center;\n            background-color: #0A0A0A;\n        ");
        this.s=document.createElement("canvas");this.s.setAttribute("width",(960).toString());this.s.setAttribute("height",this.a.toString());q(this.s,"\n            border-radius: 16px;\n            position: absolute;\n            height: 90vh;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            background-color: #000000;\n            box-shadow: 2px 0 4px 0 "+r(this.i.R,.1)+", -2px 0 4px 0 "+r(this.i.P,.1)+";\n        ");this.N=this.s.getContext("2d");
        this.N.textAlign="center";this.o=document.createElement("canvas");this.o.setAttribute("width",(960).toString());this.o.setAttribute("height",this.a.toString());this.c=this.o.getContext("2d");this.c.lineWidth=3*this.f;document.addEventListener("keydown",function(f){return a.key(f.key,!0)});document.addEventListener("keyup",function(f){return a.key(f.key,!1)});document.body.appendChild(this.s);b=new t;b.name="Computer";b.type="COMPUTER";b.color=this.i.P;b.C="";b.G="";b.l=this.f;b.h=120;b.J=this.a/2;
        b.O=0;b.K=!0;var c=new t;c.name="Computer";c.type="COMPUTER";c.color=this.i.R;c.C="";c.G="";c.l=this.f;c.h=840;c.J=this.a/2;c.O=180;c.K=!0;var d=new t;d.name=this.H.da;d.type="KEYBOARD";d.color=this.i.P;d.C="Q";d.G="W";d.l=this.f;d.h=120;d.J=this.a/2;d.O=0;var e=new t;e.name=this.H.ea;e.type="KEYBOARD";e.color=this.i.R;e.C="O";e.G="P";e.l=this.f;e.h=840;e.J=this.a/2;e.O=180;this.m=[{index:0,name:"MULTIPLAYER",g:[d,e]},{index:1,name:"SINGLE PLAYER 1",g:[d,c]},{index:2,name:"SINGLE PLAYER 2",g:[b,e]},
            {index:3,name:"GEEK",g:[b,c]}];this.mode=this.m[Math.min(this.m.length-1,Math.max(0,this.H.mode))];this.b={I:!1,reset:!0,U:0};(new u(this.step.bind(this))).start();v(this)}function v(a){a.N.font="24px monospace";a.c.clearRect(0,0,960,a.a);for(var b=h(a.mode.g),c=b.next();!c.done;c=b.next())c=c.value,c.L=0,c.x=c.h,c.y=c.J,c.D=c.h,c.F=c.J,c.angle=c.O,c.speed=2,c.u=0,c.v=0,c.W=5,c.j=!1,c.A=!1,a.b.reset&&(c.V=0,c.M=!1)}
    n.prototype.step=function(){if(this.b.I){for(var a=h(this.mode.g),b=a.next();!b.done;b=a.next())if(b=b.value,0<b.speed){b.K&&b.step(this.c,this.X);b.u=Math.cos(Math.PI/180*b.angle)*b.speed;b.v=Math.sin(Math.PI/180*b.angle)*b.speed;b.D=b.x+b.u*b.l;b.F=b.y+b.v*b.l;if(0<b.D&&960>b.D&&0<b.F&&b.F<this.a){var c=this.c.getImageData(b.D,b.F,1,1).data;if(0!==c[0]||0!==c[1]||0!==c[2])b.speed=0,this.b.U++}if(b.D<.5*this.f||b.D>960-.5*this.f)b.u=-b.u,b.angle=180/Math.PI*Math.atan2(b.v,b.u);if(b.F<.5*this.f||
        b.F>this.a-.5*this.f)b.v=-b.v,b.angle=180/Math.PI*Math.atan2(b.v,b.u);b.j?b.angle-=b.W:b.A&&(b.angle+=b.W);b.x+=b.u;b.y+=b.v;0===b.L?w(50)&&(b.L=10):b.L--}if(this.b.U>=this.mode.g.length-1)for(this.b.I=!1,a=h(this.mode.g),b=a.next();!b.done;b=a.next())b=b.value,0<b.speed?(b.M=!1,b.V++):(b.M=!0,b.Y=b.x,b.Z=b.y)}a=this.N;a.clearRect(0,0,960,this.a);a.shadowBlur=0;if(this.b.I){b=h(this.mode.g);for(c=b.next();!c.done;c=b.next())c=c.value,0===c.L&&(this.c.fillStyle=c.color,this.c.beginPath(),this.c.arc(c.x,
        c.y,c.l,0,2*Math.PI,!1),this.c.fill()),a.drawImage(this.o,0,0),a.fillStyle=c.color,a.beginPath(),a.arc(c.x,c.y,1.5*this.f,0,2*Math.PI,!1),a.fill();if(this.H.ba)for(b=h(this.mode.g),c=b.next();!c.done;c=b.next())if(c=c.value,c.K){c=h(c.$);for(var d=c.next();!d.done;d=c.next()){d=h(d.value.w);for(var e=d.next();!e.done;e=d.next())e=e.value,a.fillStyle="rgba(255, 255, 255, "+e.T+")",a.fillRect(e.x-1,e.y-1,2,2),e.S&&(a.fillStyle="red",a.fillRect(e.x-2.5,e.y-2.5,5,5))}}}else{if(this.b.reset)a.shadowColor=
        "rgba(0, 255, 32, 1)",a.fillStyle="rgba(0, 255, 32, 0.7)",a.shadowBlur=24,a.font="bold 90px monospace",a.fillText("S N A K E S",480,this.a/2.5),a.shadowBlur=16,a.font="180px monospace",a.fillStyle="rgba(198, 82, 19, 0.1)",a.fillText("\ud83d\udc0d",480,this.a/2.2);else{a.shadowBlur=this.a;a.shadowColor="rgba(0, 255, 32, 0.2)";a.fillStyle="#2d2d2d";a.fillRect(240,this.a/5,480,this.a/2);a.shadowBlur=2;a.shadowColor="rgba(0, 255, 32, 1)";a.fillStyle="black";a.fillRect(240,this.a/5,480,this.a/2);a.shadowBlur=
        0;b=h(this.mode.g);for(c=b.next();!c.done;c=b.next())c=c.value,c.M&&(c.M=!1,this.c.fillStyle=r(c.color,.2),this.c.strokeStyle=r(c.color,.1),this.c.beginPath(),this.c.arc(c.Y,c.Z,45*this.f,0,2*Math.PI,!1),this.c.fill(),this.c.stroke(),this.c.fillStyle=c.color,this.c.beginPath(),this.c.arc(c.Y,c.Z,3*this.f,0,2*Math.PI,!1),this.c.fill());a.drawImage(this.o,240,this.a/5,480,this.a/2)}a.shadowBlur=16;this.b.reset||(a.shadowColor="white",a.fillStyle="rgba(255, 255, 255, 0.9)",a.shadowBlur=24,a.font="26px monospace",
        a.fillText("SCORE",480,this.a/8));this.b.reset?(a.shadowColor="white",a.fillStyle="rgba(255, 255, 255, 0.7)",a.font="32px monospace",a.fillStyle="rgba(255, 255, 255, 0.9)",a.fillText("START",480,this.a-this.a/2.8),a.font="16px monospace",a.fillStyle="rgba(150, 150, 150, 0.25)",a.fillText("[SPACE]",480,this.a-this.a/3.2),a.font="16px monospace",a.fillStyle="rgba(255, 255, 255, 0.9)",a.fillText("MODE",480,this.a-this.a/4.6),a.font="26px monospace",a.fillStyle="rgba(255, 255, 255, 0.45)",a.fillText(this.mode.name,
        480,this.a-this.a/6.5),a.font="16px monospace",a.fillStyle="rgba(150, 150, 150, 0.25)",a.fillText("[ENTER]",480,this.a-this.a/9.5)):(a.font="26px monospace",a.fillStyle="rgba(255, 255, 255, 0.9)",a.fillText("QUIT",960/2.7,this.a-this.a/6.5),a.font="16px monospace",a.fillStyle="rgba(255, 255, 255, 0.25)",a.fillText("[ESC]",960/2.7,this.a-this.a/9.5),a.font="26px monospace",a.fillStyle="rgba(255, 255, 255, 0.9)",a.fillText("PLAY",960-960/2.7,this.a-this.a/6.5),a.font="16px monospace",a.fillStyle="rgba(255, 255, 255, 0.25)",
        a.fillText("[SPACE]",960-960/2.7,this.a-this.a/9.5));b=h(this.mode.g);for(c=b.next();!c.done;c=b.next())c=c.value,a.fillStyle=c.color,a.shadowColor=c.color,this.b.reset&&(a.font="16px monospace",a.fillText(c.type,c.h,this.a-this.a/4.6)),a.font="26px monospace",a.fillText("\u2328",c.h,this.a-this.a/6.5),a.font="16px monospace",a.fillStyle=r(c.color,.4),a.fillText(c.C?"["+c.C+"]["+c.G+"]":"[AUTO]",c.h,this.a-this.a/9.5),this.b.reset||(a.shadowColor="rgba(0, 255, 32, 1)",a.fillStyle="rgba(0, 255, 32, 7)",
        a.shadowBlur=24,a.font="80px monospace",a.fillText(c.V,c.h,this.a/2.2),a.font="16px monospace",a.fillText(c.name,c.h,this.a/1.9))}};
    n.prototype.key=function(a,b){a=a.toUpperCase();if(this.b.I)for(var c=h(this.mode.g),d=c.next();!d.done;d=c.next())d=d.value,d.K||(a===d.C?d.j=b:a===d.G&&(d.A=b));else" "===a&&b?(v(this),this.b.U=0,this.b.reset=!1,this.b.I=!0):this.b.reset&&"ENTER"===a&&b&&(this.mode=this.mode.index<this.m.length-1?this.m[this.mode.index+1]:this.m[0]);"ESCAPE"===a&&b&&(this.b.reset=!0,this.b.I=!1)};function w(a){return 0===Math.floor(Math.random()*((void 0===a?1:a)+1))}
    function r(a,b){return/^#([A-Fa-f0-9]{3}){1,2}$/.test(a)?(a=a.substring(1).split(""),3===a.length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]),a="0x"+a.join(""),"rgba("+[a>>16&255,a>>8&255,a&255].join()+", "+b+")"):a}function q(a,b){a.setAttribute("style",b.replace("/\\r?\\n|\\r/g","").replace(/\s+/g," ").trim())}
    function t(){this.K=!1;this.type=this.name="";this.color="#FFFFFF";this.O=this.J=this.h=0;this.G=this.C="";this.l=1;this.angle=this.F=this.D=this.y=this.x=this.L=0;this.speed=2;this.v=this.u=0;this.W=5;this.A=this.j=!1;this.V=0;this.M=!1;this.$=[{type:"L",B:15,precision:4,offset:5,angle:70,w:[],level:0},{type:"L",B:10,precision:20,offset:4,angle:35,w:[],level:0},{type:"L",B:15,precision:15,offset:3,angle:2,w:[],level:0},{type:"R",B:15,precision:15,offset:3,angle:-2,w:[],level:0},{type:"R",B:10,precision:20,
        offset:4,angle:-35,w:[],level:0},{type:"R",B:15,precision:4,offset:5,angle:-70,w:[],level:0}];this.b=this.a=0}
    t.prototype.step=function(a,b){this.b=this.a=0;for(var c=h(this.$),d=c.next();!d.done;d=c.next()){d=d.value;d.level=0;for(var e=d.w.length=0;e<d.precision;e++){var f={x:this.x+d.B/d.precision*this.speed*Math.cos(Math.PI/180*(this.angle+d.angle))*(e+d.offset)*this.l,y:this.y+d.B/d.precision*this.speed*Math.sin(Math.PI/180*(this.angle+d.angle))*(e+d.offset)*this.l,T:1-1/d.precision*e,S:!1};if(f.x<b.ca||f.x>b.r||f.y<b.t||f.y>b.aa)f.S=!0,d.level+=.5*f.T;var p=a.getImageData(f.x,f.y,1,1).data;if(0!==p[0]||
        0!==p[1]||0!==p[2])f.S=!0,d.level+=f.T;d.w[e]=f}switch(d.type){case "L":this.a+=d.level;break;case "R":this.b+=d.level}}0===this.a&&0===this.b?w(10)?(this.j=w(),this.A=!this.j):this.A=this.j=!1:this.a>this.b?(this.j=!0,this.A=!1):this.b>this.a?(this.A=!0,this.j=!1):(this.j=.5<Math.random(),this.A=!this.j)};function u(a){this.m=a;this.s=!1;this.f=0;this.H=1E3/60;this.a=0;this.i=1E3/60;this.o=this.X=this.N=this.c=0;this.b=this.b.bind(this)}
    u.prototype.start=function(){var a=this;!this.s&&this.m&&(this.s=!0,this.f=requestAnimationFrame(function(b){a.c=b;a.X=b;a.N=0;a.f=requestAnimationFrame(a.b)}))};u.prototype.b=function(a){if(!(a<this.c+this.H))for(this.a+=a-this.c,this.c=a,this.o=0;this.a>=this.i;)if(this.m(this.i),this.a-=this.i,240<=++this.o){this.a=0;break}this.f=requestAnimationFrame(this.b)};new n;
</script>
</body>
</html>